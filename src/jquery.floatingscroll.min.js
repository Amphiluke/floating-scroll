!function(t,n){"use strict";"function"==typeof define&&define.amd?define(["jquery"],n):n("object"==typeof module&&module.exports?require("jquery"):t.jQuery)}(this,function(t){"use strict";function n(t){var n=this,e=t.closest(".fl-scrolls-body");n.cont=t[0],e.length&&(n.scrollBody=e),n.sbar=n.initScroll(),n.visible=!0,n.updateAPI(),n.syncSbar(n.cont),n.addEventHandlers()}t.extend(n.prototype,{initScroll:function(){var n=t("<div class='fl-scrolls'></div>");return t("<div></div>").appendTo(n).css({width:this.cont.scrollWidth+"px"}),n.appendTo(this.cont)},addEventHandlers:function(){var n,e,i,o=this;for(n=o.eventHandlers=[{$el:o.scrollBody||t(window),handlers:{scroll:function(){o.checkVisibility()},resize:function(){o.updateAPI()}}},{$el:o.sbar,handlers:{scroll:function(){o.visible&&o.syncCont(this,!0)}}},{$el:t(o.cont),handlers:{scroll:function(){o.syncSbar(this,!0)},focusin:function(){setTimeout(function(){o.syncSbar(o.cont)},0)},"update.fscroll adjustScroll":function(t){"fscroll"!==t.namespace&&"adjustScroll"!==t.type||o.updateAPI()},"destroy.fscroll":function(t){"fscroll"===t.namespace&&o.destroyAPI()}}}],e=0,i=n.length;e<i;e++)n[e].$el.bind(n[e].handlers)},checkVisibility:function(){var t,n,e=this,i=e.sbar[0].scrollWidth<=e.sbar[0].offsetWidth;i||(t=e.cont.getBoundingClientRect(),n=e.scrollBody?e.scrollBody[0].getBoundingClientRect().bottom:window.innerHeight||document.documentElement.clientHeight,i=t.bottom<=n||t.top>n),e.visible===i&&(e.visible=!i,e.sbar.toggleClass("fl-scrolls-hidden"))},syncCont:function(t,n){return this.preventSyncCont===!0?void(this.preventSyncCont=!1):(this.preventSyncSbar=!!n,void(this.cont.scrollLeft=t.scrollLeft))},syncSbar:function(t,n){return this.preventSyncSbar===!0?void(this.preventSyncSbar=!1):(this.preventSyncCont=!!n,void(this.sbar[0].scrollLeft=t.scrollLeft))},updateAPI:function(){var n=this,e=n.cont,i=e.getBoundingClientRect();n.sbar.width(t(e).outerWidth()),n.scrollBody||n.sbar.css("left",i.left+"px"),t("div",n.sbar).width(e.scrollWidth),n.checkVisibility()},destroyAPI:function(){var t,n,e=this.eventHandlers;for(t=0,n=e.length;t<n;t++)e[t].$el.unbind(e[t].handlers);this.sbar.remove()}}),t.fn.attachScroll=t.fn.floatingScroll=function(e){return arguments.length&&"init"!==e?n.prototype.hasOwnProperty(e+"API")&&this.trigger(e+".fscroll"):this.each(function(){new n(t(this))}),this}});