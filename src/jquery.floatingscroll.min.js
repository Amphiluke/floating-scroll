!function(t,n){"use strict";"function"==typeof define&&define.amd?define(["jquery"],n):n("object"==typeof module&&module.exports?require("jquery"):t.jQuery)}(this,function(t){"use strict";function n(t){var n=this,e=t.closest(".fl-scrolls-body"),o=t.closest(".fl-scrolls-container");n.cont=t[0],e.length&&(n.scrollBody=e),o.length&&(n.scrollContainer=o),n.sbar=n.initScroll(),n.visible=!0,n.updateAPI(),n.syncSbar(n.cont),n.addEventHandlers()}t.extend(n.prototype,{initScroll:function(){var n=t("<div class='fl-scrolls'></div>");return t("<div></div>").appendTo(n).css({width:this.cont.scrollWidth+"px"}),n.appendTo(this.scrollContainer||this.cont)},addEventHandlers:function(){var n,e,o,s=this;for(n=s.eventHandlers=[{$el:s.scrollBody||t(window),handlers:{scroll:function(){s.checkVisibility()}}},{$el:t(window),handlers:{resize:function(){s.updateAPI()}}},{$el:s.sbar,handlers:{scroll:function(){s.visible&&s.syncCont(this,!0)}}},{$el:t(s.cont),handlers:{scroll:function(){s.syncSbar(this,!0)},focusin:function(){setTimeout(function(){s.syncSbar(s.cont)},0)},"update.fscroll adjustScroll":function(t){("fscroll"===t.namespace||"adjustScroll"===t.type)&&s.updateAPI()},"destroy.fscroll":function(t){"fscroll"===t.namespace&&s.destroyAPI()}}}],e=0,o=n.length;o>e;e++)n[e].$el.bind(n[e].handlers)},checkVisibility:function(){var t,n,e=this,o=e.sbar[0].scrollWidth<=e.sbar[0].offsetWidth;o||(t=e.cont.getBoundingClientRect(),n=e.scrollBody?e.scrollBody[0].getBoundingClientRect().bottom:window.innerHeight||document.documentElement.clientHeight,o=t.bottom<=n||t.top>n),e.visible===o&&(e.visible=!o,e.sbar.toggleClass("fl-scrolls-hidden")),e.scrollBody&&e.sbar.css({top:e.visible?n-e.sbar.height()+"px":""})},syncCont:function(t,n){return this.preventSyncCont===!0?void(this.preventSyncCont=!1):(this.preventSyncSbar=!!n,void(this.cont.scrollLeft=t.scrollLeft))},syncSbar:function(t,n){return this.preventSyncSbar===!0?void(this.preventSyncSbar=!1):(this.preventSyncCont=!!n,void(this.sbar[0].scrollLeft=t.scrollLeft))},updateAPI:function(){var n=this,e=n.cont,o=e.getBoundingClientRect();n.sbar.width(t(e).outerWidth()),n.sbar.css("left",Math.round(o.left)+"px"),t("div",n.sbar).width(e.scrollWidth),n.checkVisibility()},destroyAPI:function(){var t,n,e=this.eventHandlers;for(t=0,n=e.length;n>t;t++)e[t].$el.unbind(e[t].handlers);this.sbar.remove()}}),t.fn.attachScroll=t.fn.floatingScroll=function(e){return arguments.length&&"init"!==e?n.prototype.hasOwnProperty(e+"API")&&this.trigger(e+".fscroll"):this.each(function(){new n(t(this))}),this}});