!function(t,n){"use strict";"function"==typeof define&&define.amd?define(["jquery"],n):n("object"==typeof module&&module.exports?require("jquery"):t.jQuery)}(this,function(t){"use strict";function n(t){var n=this;n.cont={block:t[0],left:0,top:0,bottom:0,height:0,width:0},n.sbar=n.initScroll(),n.visible=!0,n.updateAPI(),n.syncSbar(t[0]),n.addEventHandlers()}var e=window,i=/*@cc_on (@_jscript_version<9)?function(){var e=document.documentElement;return e.scrollTop+e.clientHeight;}:@*/function(){return e.pageYOffset+e.innerHeight};t.extend(n.prototype,{initScroll:function(){var n=t("<div class='fl-scrolls'></div>");return t("<div></div>").appendTo(n).css({width:this.cont.block.scrollWidth+"px"}),n.appendTo(this.cont.block)},addEventHandlers:function(){var n,i,o,s=this;for(n=s.eventHandlers=[{$el:t(e),handlers:{scroll:function(){s.checkVisibility()},resize:function(){s.updateAPI()}}},{$el:s.sbar,handlers:{scroll:function(){s.visible&&s.syncCont(this,!0)}}},{$el:t(s.cont.block),handlers:{scroll:function(){s.syncSbar(this,!0)},focusin:function(){setTimeout(function(){s.syncSbar(s.cont.block)},0)},"update.fscroll adjustScroll":function(t){"fscroll"!==t.namespace&&"adjustScroll"!==t.type||s.updateAPI()},"destroy.fscroll":function(t){"fscroll"===t.namespace&&s.destroyAPI()}}}],i=0,o=n.length;i<o;i++)n[i].$el.bind(n[i].handlers)},checkVisibility:function(){var t,n=this,e=n.cont,o=n.sbar[0].scrollWidth<=n.sbar[0].offsetWidth;o||(t=i(),o=e.bottom<=t||e.top>t),n.visible===o&&(n.visible=!n.visible,n.sbar.toggleClass("fl-scrolls-hidden"))},syncCont:function(t,n){return this.preventSyncCont===!0?void(this.preventSyncCont=!1):(this.preventSyncSbar=!!n,void(this.cont.block.scrollLeft=t.scrollLeft))},syncSbar:function(t,n){return this.preventSyncSbar===!0?void(this.preventSyncSbar=!1):(this.preventSyncCont=!!n,void(this.sbar[0].scrollLeft=t.scrollLeft))},updateAPI:function(){var n=this,e=n.cont,i=t(e.block),o=i.offset();e.height=i.outerHeight(),e.width=i.outerWidth(),e.left=o.left,e.top=o.top,e.bottom=o.top+e.height,n.sbar.width(e.width).css("left",o.left+"px"),t("div",n.sbar).width(i[0].scrollWidth),n.checkVisibility()},destroyAPI:function(){var t,n,e=this.eventHandlers;for(t=0,n=e.length;t<n;t++)e[t].$el.unbind(e[t].handlers);this.sbar.remove()}}),t.fn.attachScroll=t.fn.floatingScroll=function(e){return arguments.length&&"init"!==e?n.prototype.hasOwnProperty(e+"API")&&this.trigger(e+".fscroll"):this.each(function(){new n(t(this))}),this}});